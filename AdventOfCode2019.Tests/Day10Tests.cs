namespace AdventOfCode2019.Tests;

public class Day10Tests
{
    [Theory]
    [InlineData(new [] { 
        ".#..#",
        ".....",
        "#####",
        "....#",
        "...##" 
    }, 8)]
    [InlineData(new [] { 
        "......#.#.",
        "#..#.#....",
        "..#######.",
        ".#.#.###..",
        ".#..#.....",
        "..#....#.#",
        "#..#....#.",
        ".##.#..###",
        "##...#..#.",
        ".#....####" 
    }, 33)]
    [InlineData(new [] { 
        "#.#...#.#.",
        ".###....#.",
        ".#....#...",
        "##.#.#.#.#",
        "....#.#.#.",
        ".##..###.#",
        "..#...##..",
        "..##....##",
        "......#...",
        ".####.###." 
    }, 35)]
    [InlineData(new [] { 
        ".#..#..###",
        "####.###.#",
        "....###.#.",
        "..###.##.#",
        "##.##.#.#.",
        "....###..#",
        "..#.#..#.#",
        "#..#.#.###",
        ".##...##.#",
        ".....#.#.." 
    }, 41)]
    [InlineData(new [] { 
        ".#..##.###...#######",
        "##.############..##.",
        ".#.######.########.#",
        ".###.#######.####.#.",
        "#####.##.#.##.###.##",
        "..#####..#.#########",
        "####################",
        "#.####....###.#.#.##",
        "##.#################",
        "#####.##.###..####..",
        "..######..##.#######",
        "####.##.####...##..#",
        ".#####..#.######.###",
        "##...#.##########...",
        "#.##########.#######",
        ".####.#.###.###.#.##",
        "....##.##.###..#####",
        ".#.#.###########.###",
        "#.#.#.#####.####.###",
        "###.##.####.##.#..##" 
    }, 210)]
    public void Part1Test(string[] input, int result)
    {
        Assert.Equal(result, Day10.SolvePart1(input).MaxVisibleAsteroids);
    }
    
    [Theory]
    [InlineData(new [] { 
        ".#..##.###...#######",
        "##.############..##.",
        ".#.######.########.#",
        ".###.#######.####.#.",
        "#####.##.#.##.###.##",
        "..#####..#.#########",
        "####################",
        "#.####....###.#.#.##",
        "##.#################",
        "#####.##.###..####..",
        "..######..##.#######",
        "####.##.####...##..#",
        ".#####..#.######.###",
        "##...#.##########...",
        "#.##########.#######",
        ".####.#.###.###.#.##",
        "....##.##.###..#####",
        ".#.#.###########.###",
        "#.#.#.#####.####.###",
        "###.##.####.##.#..##" 
    }, 200, 802)]
    public void Part2Test(string[] input, int needAsteroidNumber, int result)
    {
        var indexForStation = Day10.SolvePart1(input).AsteroidIndexForStation;
        Assert.Equal(result, Day10.SolvePart2(input, indexForStation, needAsteroidNumber));
    }
}
